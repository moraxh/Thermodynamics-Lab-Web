---
  const pages = ['/', '/publications', '/divulgation', '/us', '/contact'];
---

<header class="from-gray0 to-40% to-transparent bg-gradient-to-b flex justify-between items-center gap-24 pt-3 px-14">
  <a href="/">
    <img class="w-72 min-w-52" src="/images/logo/logo_full.webp" alt="logo">
  </a>

  <nav class="flex justify-between gap-10 text-2xl">
    <a href={pages[0]}>Inicio</a>
    <a href={pages[1]}>Publicaciones</a>
    <a href={pages[2]}>Divulgación</a>
    <a href={pages[3]}>Sobre nosotros</a>
    <a href={pages[4]}>Contacto</a>
  </nav>

  <button id="nav-menu" class="hidden hover:bg-gray2 border-gray2 border-2 w-12 aspect-square rounded-md">
    <span class="text-xl">☰</span>
    <span class="text-3xl">×</span>
  </button>
</header>

<script define:vars={{ pages }}>
  const pathname = location.pathname;
  const navMenu = document.getElementById('nav-menu');

  if (navMenu) {
    navMenu.addEventListener('click', () => {
      document.querySelector('header')?.classList.toggle('active');
    });
  }

  if (pages.find(page => page === pathname)) {
    document.querySelectorAll(`a[href="${pathname}"]`)?.forEach(el => el.classList.add('text-accent'));
    document.querySelectorAll(`a[href="${pathname}"]`)?.forEach(el => el.classList.add('font-bold'));
  }
</script>

<style>
  header > nav > a {
    @apply overflow-hidden
  }

  header > nav > a:hover {
    @apply text-accent;
  }
  
  header > nav > a::after {
    content: '';
    @apply bg-accent block relative w-full h-0.5 right-[100%] transition-all duration-200 ease-in-out;
  }

  header > nav > a:hover::after {
    @apply right-0;
  }

  header > button > :nth-child(2) {
    @apply hidden;
  }

  @media (max-width: 980px) {
    header.active {
      @apply fixed left-0 right-0 bottom-0 top-0 bg-gray0/50 backdrop-blur-md flex flex-col gap-12 items-center justify-start;
    }
    
    header.active > a > img {
      @apply w-80;
    }

    header.active > nav {
      @apply bg-gray0 border border-gray1 px-20 py-12 rounded-lg flex-col w-fit gap-12 items-center;
    }
    
    header.active > nav > a {
      @apply w-fit text-3xl;
    }

    header.active > button {
      @apply fixed top-12 right-12 z-50;
    }

    header.active > button > :nth-child(2) {
      @apply block;
    }

    header.active > button > :nth-child(1) {
      @apply hidden;
    }

    header:not(.active) > nav {
      @apply hidden; 
    }

    button {
      @apply block;
    }
  }
</style>